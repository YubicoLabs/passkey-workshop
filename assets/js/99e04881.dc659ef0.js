"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[25],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,m=u["".concat(s,".").concat(d)]||u[d]||h[d]||r;return n?o.createElement(m,l(l({ref:t},c),{},{components:n})):o.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:a,l[1]=i;for(var p=2;p<r;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5637:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));const r={sidebar_position:4},l="Deploy project",i={unversionedId:"deploy",id:"deploy",title:"Deploy project",description:"In this section we are going to deploy the project to your local environment. At the end of this section you should be able to access all of the components that will allow you to test, and further understand the workings of a passkey application.",source:"@site/docs/deploy.md",sourceDirName:".",slug:"/deploy",permalink:"/docs/deploy",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deploy.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Relying party",permalink:"/docs/architecture/relying-party"},next:{title:"Relying Party",permalink:"/docs/category/relying-party"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Clone the repository",id:"clone-the-repository",level:2},{value:"Deployment configurations",id:"deployment-configurations",level:2},{value:"Deploying the project",id:"deploying-the-project",level:2},{value:"Deploying a native iOS example",id:"deploying-a-native-ios-example",level:3},{value:"Stopping the project",id:"stopping-the-project",level:2},{value:"Removing the project",id:"removing-the-project",level:2}],c={toc:p},u="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"deploy-project"},"Deploy project"),(0,a.kt)("p",null,"In this section we are going to deploy the project to your local environment. At the end of this section you should be able to access all of the components that will allow you to test, and further understand the workings of a passkey application."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"The following prerequisites items are required in order to run, and test this application in your local environment."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.docker.com/"},"Docker")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://git-scm.com/"},"Git")),(0,a.kt)("li",{parentName:"ul"},"FIDO2 authenticator",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"A security key, like a Yubikey"),(0,a.kt)("li",{parentName:"ul"},"A device with a platform authenticator such as TouchID/FaceID, or Windows Hello"),(0,a.kt)("li",{parentName:"ul"},"A browser that supports virtual authenticators, such as ",(0,a.kt)("a",{parentName:"li",href:"https://developer.chrome.com/docs/devtools/webauthn/"},"Google Chrome")))),(0,a.kt)("li",{parentName:"ul"},"A platform (browser and operating system) that supports WebAuthn/passkeys (",(0,a.kt)("a",{parentName:"li",href:"https://passkeys.dev/device-support/"},"browser support matrix"),")")),(0,a.kt)("h2",{id:"clone-the-repository"},"Clone the repository"),(0,a.kt)("p",null,"Your first step will be to clone the repository from GitHub, using git."),(0,a.kt)("p",null,"With HTTPS"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/YubicoLabs/passkey-workshop.git\n")),(0,a.kt)("p",null,"Once the repository is cloned, navigate into the scripts folder."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd passkey-workshop/scripts\n")),(0,a.kt)("p",null,"The scripts folder contains two options: Mac-Linux (using bash), and for Windows (using Powershell). Choose your applicable folder, and navigate to it."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Windows")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd Windows\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Mac or Linux")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd Mac-Linux\n")),(0,a.kt)("h2",{id:"deployment-configurations"},"Deployment configurations"),(0,a.kt)("p",null,"Regardless of environment, both folders contain a file that will allow you to configure certain aspects of your passkey application."),(0,a.kt)("p",null,"The file ",(0,a.kt)("inlineCode",{parentName:"p"},"DeployProject.conf")," will allow you to set specific parameters for use in the application (if no values are provided, our deploy script will apply default values based on our best practices)."),(0,a.kt)("admonition",{title:"Ensure you understand the configurations before changing them",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"If this is your first time deploying this application, or you are unfamiliar with passkeys, then we recommend that you utilize the default settings.")),(0,a.kt)("p",null,"Below is an overview of the configurations file, along with the acceptable parameters"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  /**\n   * Denotes the valid domain that identifies the relying party\n   * Reference: https://www.w3.org/TR/webauthn-2/#relying-party-identifier\n   * Note - If you do not have a dedicated custom domain, then it is best\n   * to use the default localhost value.\n   * Default: localhost\n   * Options: free text\n   */\n  "RP_ID": "",\n\n  /**\n   * Human readable name that relates to the name of the site listed from the RP_ID\n   * Default: "My app"\n   * Options: free text\n   */\n  "RP_NAME": "",\n\n  /**\n   * Requirement from the java-webauthn-server library. Denotes the origins that can generate a credential that\n   * will be accepted by the relying party.\n   * This should closely correspond to the domain denoted in the RP_ID. Note that unlike the RP_ID, this\n   * value will require the port number\n   * DO NOT include the protocol header (http/https), the relying party automatically allows for both\n   * Multiple domains can be listed through comma delimitation\n   * Default: localhost:3000\n   * Options: free text\n   * Example (single domain): localhost:3000\n   * Example (multiple domains): localhost:3000,localhost:3002,my.domain.com\n   */\n  "RP_ALLOWED_ORIGINS": "",\n\n  /**\n   * Requirement from the Spring-Boot framework, this denotes the allowed cross-origins domains that are allowed to\n   * interact with the API.\n   * For the most part, this field should correspond to what is listed in the RP_ALLOWED_ORIGINS property\n   * Default: localhost:3000\n   * Options: free text\n   * Example (single domain): localhost:3000\n   * Example (multiple domains): localhost:3000,localhost:3002,my.domain.com\n   */\n  "RP_ALLOWED_CROSS_ORIGINS": "",\n\n  /**\n   * Sets the webauthn applications attestation preference\n   * Reference: https://www.w3.org/TR/webauthn-2/#enumdef-attestationconveyancepreference\n   * Default: DIRECT\n   * Options: DIRECT, INDIRECT, ENTERPRISE, NONE\n   */\n  "RP_ATTESTATION_PREFERENCE": "",\n\n  /**\n   * Allows you to configure your application to reject registrations that don\'t include\n   * some form of trusted attestation\n   * Default: false\n   * Options: true, false\n   */\n  "RP_ALLOW_UNTRUSTED_ATTESTATION": "",\n\n  /**\n   * Allows you to deploy the application to different environments\n   * At this moment, the only option that is configured is for a local deployment, but this example will be\n   * extended to allow new environments, such as cloud deployments\n   * some form of trusted attestation\n   * Default: local\n   * Options: local\n   */\n  "DEPLOYMENT_ENVIRONMENT": "",\n\n  /**\n   * Allows you to select the data source used by the application\n   * The default option is to deploy a full MySQL server in Docker\n   * in-mem will not deploy a MySQL instance, and instead rely on in-memory storage in the Java application.\n   * Note that the in-mem option will not persist data if the Java container is stopped\n   * Default: mysql\n   * Options: mysql, in-mem\n   */\n  "DATABASE_TYPE": "",\n\n  /**\n   * Allows you to set your desired password for the root account in the MySQL server.\n   * In the case that this field is left empty, the deploy script will generate a random one for you\n   * Default: randomly generated string\n   * Options: free text\n   */\n  "DATABASE_ROOT_PASSWORD": "",\n\n  /**\n   * Allows you to set the client application that you wish to deploy\n   * At this moment, the only option that is configured is a react based deployment.\n   * You may set this option as none, if you are only leveraging the relying party aspect of this example\n   * Default: react\n   * Options: react, none\n   */\n  "CLIENT_TYPE": "",\n\n  /**\n   * Allows you to set the identity provider and authorization server for the application\n   * At this moment, the only option that is configured is a keycloak based deployment.\n   * You may set this option as none, if you are leveraging another identity provider\n   * Default: keycloak\n   * Options: keycloak, none\n   */\n  "IDP_TYPE": ""\n}\n')),(0,a.kt)("h2",{id:"deploying-the-project"},"Deploying the project"),(0,a.kt)("p",null,"To deploy the application, run the following command:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Mac-Linux")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./DeployProject.sh\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Windows")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"@TODO - Add\n")),(0,a.kt)("p",null,'As noted in the previous section, all "arguments" come in the form of the configurations set in the ',(0,a.kt)("inlineCode",{parentName:"p"},"DeployProject_Settings.json")," file."),(0,a.kt)("p",null,"Note: this script is used for both deploying a fresh version of the application, and for restarting the service if it has been stopped."),(0,a.kt)("p",null,"Once the application has been deployed, your resources will be available through the following URLs"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Java-app (relying party) - ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080"},"http://localhost:8080"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Navigating to this resource will bring you to the API documentation"))),(0,a.kt)("li",{parentName:"ul"},"Keycloak (identity and authorization provider) - ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8081"},"http://localhost:8081"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Navigating to this resource will bring you to the Keycloak administrator screen"),(0,a.kt)("li",{parentName:"ul"},"The default credentials for the admin account is:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Username: admin"),(0,a.kt)("li",{parentName:"ul"},"Password: admin"))))),(0,a.kt)("li",{parentName:"ul"},"MySQL server (database) - ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:3306"},"http://localhost:3306"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"You won't be able to directly navigate to this resource. Please use a MySQL client to connect to the database"),(0,a.kt)("li",{parentName:"ul"},"The default credentials for the root account is:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Username: root"),(0,a.kt)("li",{parentName:"ul"},"Password: Randomly generated (unless specified), can be found in the ",(0,a.kt)("inlineCode",{parentName:"li"},".env")," file that is generated in the current directory's mysql folder"))))),(0,a.kt)("li",{parentName:"ul"},"React-app (web client) - ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:3000"},"http://localhost:3000"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Navigating to this resource will bring you to the web client application")))),(0,a.kt)("h3",{id:"deploying-a-native-ios-example"},"Deploying a native iOS example"),(0,a.kt)("p",null,"@TODO - Dennis to add this section"),(0,a.kt)("h2",{id:"stopping-the-project"},"Stopping the project"),(0,a.kt)("p",null,"To stop the application containers, run the following command:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Mac-Linux")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./StopProject.sh\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Windows")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"@TODO - Add\n")),(0,a.kt)("p",null,"This will look for any instance of the containers set by our deploy script, and stop them from running."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"If the application has been stopped, run the deployment script to restart your application.")),(0,a.kt)("h2",{id:"removing-the-project"},"Removing the project"),(0,a.kt)("p",null,"To remove the application containers, run the following command:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Mac-Linux")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"./RemoveProject.sh\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Windows")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"@TODO - Add\n")),(0,a.kt)("p",null,"This will look for any instance of the containers and images set by our deploy script, and remove them from Docker instance."),(0,a.kt)("p",null,'Once the application has been removed, you will need to run the deploy application script, where you will be given a fresh, "factory-default", version of the application. Any passkeys registered to the old deployment will be unusable.'))}h.isMDXComponent=!0}}]);