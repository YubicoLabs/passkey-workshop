"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9486],{2044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>d,frontMatter:()=>h,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"high_assurance/client_application/stepup","title":"Step up authentication","description":"This section covers how to incorporate step up authentication from the client application. Step up authentication is used to promote the level of a user\'s access when trying to perform a sensitive, or high-risk action.","source":"@site/docs/high_assurance/client_application/stepup.mdx","sourceDirName":"high_assurance/client_application","slug":"/high_assurance/client_application/stepup","permalink":"/passkey-workshop/docs/high_assurance/client_application/stepup","draft":false,"unlisted":false,"editUrl":"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/high_assurance/client_application/stepup.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Credential management","permalink":"/passkey-workshop/docs/high_assurance/client_application/credential_management"},"next":{"title":"Advanced protection","permalink":"/passkey-workshop/docs/high_assurance/client_application/advanced_protection"}}');var s=n(2467),a=n(8453),o=n(3554),r=n.n(o);const h={sidebar_position:4},c="Step up authentication",u={},l=[{value:"Step up authentication in context",id:"step-up-authentication-in-context",level:2},{value:"Demonstration",id:"demonstration",level:2},{value:"Implementation guidance",id:"implementation-guidance",level:2},{value:"Relying party mechanisms",id:"relying-party-mechanisms",level:3},{value:"OAuth2 and the Authentication Context Reference (ACR)",id:"oauth2-and-the-authentication-context-reference-acr",level:3},{value:"Sequence diagram",id:"sequence-diagram",level:3}];function p(e){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"step-up-authentication",children:"Step up authentication"})}),"\n",(0,s.jsx)(t.p,{children:"This section covers how to incorporate step up authentication from the client application. Step up authentication is used to promote the level of a user's access when trying to perform a sensitive, or high-risk action."}),"\n",(0,s.jsx)(t.h2,{id:"step-up-authentication-in-context",children:"Step up authentication in context"}),"\n",(0,s.jsxs)(t.p,{children:["First, let's explore step up authentication in the context of our banking solution. Earlier in this guide you learned about the ",(0,s.jsx)(t.a,{href:"/docs/high_assurance/assurance",children:"different assurance levels"})," of passkeys. While all passkeys offer more protection than passwords or traditional 2FA, there is still a degree of difference in the level of protection offered between low assurance and high assurance passkeys."]}),"\n",(0,s.jsx)(t.p,{children:"In something like a banking scenario, you want to ensure that your users are protected, but above all you want to ensure that a user can access their account funds with ease. Within the context of passkeys, this means that you can't always require a high assurance passkey for every user session or transaction; along the same lines, you also need to ensure that a high-risk action requires a high degree of assurance that the user making the request is the owner of the account."}),"\n",(0,s.jsx)(t.p,{children:"In our banking application, there are two different rules for making a transaction:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Any transaction under $1000 can be made, regardless of the passkey used to authenticate into the session"}),"\n",(0,s.jsx)(t.li,{children:"Any transaction of $1000 or more will require that a user's session had been established with a high assurance passkey (like a security key) during authentication"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The step up authentication flow is introduced when a user, who authenticated with a low assurance passkey, attempts to process a transaction of $1000 or more. The user will be presented with a pop up menu from the identity provider, asking them to reauthenticate with their security key. If successful, the transaction will be processed, otherwise it will be rejected until the user authenticates with a high assurance passkey. It's important that you do not sign out the user if step up authentication fails, they should be allowed to continue with their current session, only being allowed to process low risk transactions."}),"\n",(0,s.jsx)(t.h2,{id:"demonstration",children:"Demonstration"}),"\n",(0,s.jsx)(t.p,{children:"The first video will show a standard, low risk transaction. A user will authenticate with their low assurance passkey, and successfully post a transaction under $1000. In this scenario, imagine that we are authenticating as an existing user who has registered both their device biometric, and security key."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_stepup_low.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.p,{children:"The second video shows a user, using the same session from the first video, attempting to make a high risk transaction. The user will attempt to make a transaction of $1000 or more. Notice how the user is prompted by the identity provider to perform step up authentication. In this scenario, the user will cancel the step up authentication prompt. Note how the pop up will indicate that the transaction will not process due to step up authentication not being successful."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_stepup_low_high.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.p,{children:"The third video follows a similar flow to the second. The user will be authenticated using a low assurance passkey, and will attempt to make a high risk transaction. In this case, the user will successfully perform step up authentication, and the transaction will successfully process."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_stepup_low_up.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.p,{children:"The fourth video shows a user authenticating with their high assurance passkey, followed by them posting a high risk transaction. Notice how the user is met with no additional friction, and their transaction is automatically posted."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_stepup_high.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.h2,{id:"implementation-guidance",children:"Implementation guidance"}),"\n",(0,s.jsx)(t.p,{children:"This section will be broken up into different sections to describe all of the parts involved in making step up authentication possible. Note that the guidance below is meant to outline a general case for using passkeys in a step up authentication flow, and will differ based on your specific implementation."}),"\n",(0,s.jsx)(t.h3,{id:"relying-party-mechanisms",children:"Relying party mechanisms"}),"\n",(0,s.jsxs)(t.p,{children:["Before you proceed, please ensure that you have reviewed the ",(0,s.jsx)(t.a,{href:"/docs/category/relying-party-1",children:"previous section"})," on the different mechanisms that were introduced into the relying party (Attestation, FIDO MDS, Allow Lists, and credential assurance indicators)."]}),"\n",(0,s.jsx)(t.h3,{id:"oauth2-and-the-authentication-context-reference-acr",children:"OAuth2 and the Authentication Context Reference (ACR)"}),"\n",(0,s.jsxs)(t.p,{children:["Please refer to the ",(0,s.jsx)(t.a,{href:"/docs/high_assurance/architecture#step-up-authentication",children:"Architecture - Step up authentication"})," page found earlier in this guide for an explanation on how Authentication Context Reference (",(0,s.jsx)(t.strong,{children:"ACR"}),") fits into an OAuth2 flow."]}),"\n",(0,s.jsx)(t.h3,{id:"sequence-diagram",children:"Sequence diagram"}),"\n",(0,s.jsx)(t.p,{children:"The sequence diagram below represents the flow of data between the different components of the application to determine if a transaction should be processed, or if step up authentication is required."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Stepup authentication sequence",src:n(9013).A+"",width:"2976",height:"8340"})})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(6540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}},9013:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/stepup_flow-4cb07b010eec0700af348f303a09f71b.png"}}]);