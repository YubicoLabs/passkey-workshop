"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5124],{3420:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>h,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"advanced_use_cases/client_hints","title":"Client Hints","description":"Client hints are in addition to the Level 3 version of the WebAuthn specification that aims to improve UX flows to aid in the adoption of passkeys. Hints provide a relying party a mechanism to suggest to a client application the type of authenticator that should be used to complete a WebAuthn ceremony.","source":"@site/docs/advanced_use_cases/client_hints.md","sourceDirName":"advanced_use_cases","slug":"/advanced_use_cases/client_hints","permalink":"/passkey-workshop/docs/advanced_use_cases/client_hints","draft":false,"unlisted":false,"editUrl":"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/advanced_use_cases/client_hints.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Relying party implementation","permalink":"/passkey-workshop/docs/advanced_use_cases/attestation/relying-party-implementation"},"next":{"title":"High assurance concepts","permalink":"/passkey-workshop/docs/category/high-assurance-concepts"}}');var s=n(2467),o=n(8453),a=n(3554),r=n.n(a);const h={sidebar_position:2},c="Client Hints",l={},d=[{value:"Client hints vs authenticator attachment",id:"client-hints-vs-authenticator-attachment",level:2},{value:"Example",id:"example",level:2},{value:"Types of hints",id:"types-of-hints",level:2},{value:"None (null)",id:"none-null",level:3},{value:"security-key",id:"security-key",level:3},{value:"client-device",id:"client-device",level:3},{value:"hybrid",id:"hybrid",level:3},{value:"Platform support",id:"platform-support",level:2},{value:"Implementation guidance",id:"implementation-guidance",level:2},{value:"Relying party",id:"relying-party",level:3},{value:"Clients",id:"clients",level:3}];function p(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"client-hints",children:"Client Hints"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://www.w3.org/TR/webauthn-3/#enum-hints",children:"Client hints"})," are in addition to the Level 3 version of the WebAuthn specification that aims to improve UX flows to aid in the adoption of passkeys. Hints provide a relying party a mechanism to suggest to a client application the type of authenticator that should be used to complete a WebAuthn ceremony."]}),"\n",(0,s.jsx)(t.p,{children:"The ability to suggest a specific type of authenticator can be useful for a variety of situations that can include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"An enterprise relying party suggesting to the client that it's expecting for a security key to be used"}),"\n",(0,s.jsx)(t.li,{children:"Prompts in a consumer application that provides different user flows for platform authenticators and security keys"}),"\n",(0,s.jsx)(t.li,{children:"The ability to hide the QR code presented in a cross-platform defined requests when only a security key is expected"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"client-hints-vs-authenticator-attachment",children:"Client hints vs authenticator attachment"}),"\n",(0,s.jsxs)(t.p,{children:["Earlier in this guide, we introduced the concept of ",(0,s.jsx)(t.a,{href:"https://yubicolabs.github.io/passkey-workshop/docs/relying-party/reg-flow#:~:text=discouraged-,authenticatorAttachment,-defines%20the%20AuthenticatorAttachment",children:"authenticator attachment"}),". Authenticator attachment has historically been the mechanism to enforce the use of a specific type of authenticator against two choices:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Platform"}),", which indicates the built in authenticator on a device such as Windows Hello, and Touch ID"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Cross-platform"}),", which could be any roaming device such as a security key, or a phone acting as a roaming authenticator through the hybrid (QR code) flow"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The primary difference between hints and authenticator attachment is in the enforcement of the selection on the property. Hints will immediately show the WebAuthn prompt defined by the hint, but will allow the user to make another selection of their choice. Authenticator attachment always enforces the use of the authenticator that was defined by the relying party (so if platform was selected, then security keys are no longer an option for the user)."}),"\n",(0,s.jsx)(t.p,{children:"Use the outline below to understand how the two properties may interact as they continue to coexist in the WebAuthn specification."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Hints may contradict what's defined in the authenticator attachment, when this occurs the hint setting should be given precedence."}),"\n",(0,s.jsx)(t.li,{children:"Authenticator attachment should not be deprecated from a relying party, as it should be used as a compliment to hints for clients (browsers, OS, and platforms) that have not adopted the use of hints"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.p,{children:"Below is a demonstration of how hints work in a client application. The video denotes different (but not all) permutations for hints, and how the client reacts to the input. An in-depth explanation on the different hints enumerations is included in the next section."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/hints-video.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.h2,{id:"types-of-hints",children:"Types of hints"}),"\n",(0,s.jsx)(t.p,{children:"The WebAuthn specification notes a few different options that can be expressed to the client from the relying party. Hints are expressed in the attestation and assertion requests as the hints property, which is an array list of the enumerations listed below."}),"\n",(0,s.jsxs)(t.p,{children:["The enumerations are ordered in the following decreasing preference: ",(0,s.jsx)(t.code,{children:"security-key, client-device, hybrid"}),". This means that if two hints are contradictory, then the option with the higher preference will be presented over the other."]}),"\n",(0,s.jsxs)(t.p,{children:["Meaning that if a hints property is set with a value of ",(0,s.jsx)(t.code,{children:'["hybrid", "security-key"]'}),", then the user will be presented with a modal to register or authenticate with a security key."]}),"\n",(0,s.jsx)(t.h3,{id:"none-null",children:"None (null)"}),"\n",(0,s.jsxs)(t.p,{children:["The option of no hint can be denoted by not including the hints property, setting the property to ",(0,s.jsx)(t.code,{children:"null"}),", or by passing a hints property with an empty array. This indicates to the client application that your relying party has no preference on the authenticator used, and will show a standard modal presenting all of the standard WebAuthn options of the client."]}),"\n",(0,s.jsx)(t.h3,{id:"security-key",children:"security-key"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"security-key"})," denotes to the client application that it's expecting the user to leverage a security key for registration or authentication. This is helpful in enterprise, and other high assurance scenarios as it helps to guide the use of device-bound passkeys found on security keys."]}),"\n",(0,s.jsxs)(t.p,{children:["When using this option you should set the ",(0,s.jsx)(t.code,{children:"authenticatorAttachment"})," property to ",(0,s.jsx)(t.code,{children:"cross-platform"}),", This will help ensure compatibility with clients that have not adopted the use of hints in their WebAuthn implementation."]}),"\n",(0,s.jsx)(t.h3,{id:"client-device",children:"client-device"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"client-device"})," denotes to the client application that it's expecting the user to leverage a platform authenticator. This will likely result in the creation of copyable passkeys."]}),"\n",(0,s.jsxs)(t.p,{children:["When using this option you should set the ",(0,s.jsx)(t.code,{children:"authenticatorAttachment"})," property to ",(0,s.jsx)(t.code,{children:"platform"}),", This will help ensure compatibility with clients that have not adopted the use of hints in their WebAuthn implementation."]}),"\n",(0,s.jsx)(t.h3,{id:"hybrid",children:"hybrid"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"hybrid"})," denotes to the client application that it's expecting the use of a roaming, platform authenticator that will leverage the hybrid (QR code) flow. The user will be presented with a QR code to scan with their smartphone to leverage a passkey accessible by the device."]}),"\n",(0,s.jsxs)(t.p,{children:["When using this option you should set the ",(0,s.jsx)(t.code,{children:"authenticatorAttachment"})," property to ",(0,s.jsx)(t.code,{children:"cross-platform"}),", This will help ensure compatibility with clients that have not adopted the use of hints in their WebAuthn implementation."]}),"\n",(0,s.jsx)(t.h2,{id:"platform-support",children:"Platform support"}),"\n",(0,s.jsxs)(t.p,{children:["Before attempting to implement hints from your relying party, ensure that your chosen platform (browser, OS, client) has support for Client Hints. You can use the ",(0,s.jsx)(t.a,{href:"https://passkeys.dev/device-support/",children:"device support matrix on passkeys.dev"})," to see if your platform is supported."]}),"\n",(0,s.jsx)(t.h2,{id:"implementation-guidance",children:"Implementation guidance"}),"\n",(0,s.jsx)(t.h3,{id:"relying-party",children:"Relying party"}),"\n",(0,s.jsxs)(t.p,{children:["The goal of implementing Client Hints for a Relying Party is ensuring that you add the property to the ",(0,s.jsx)(t.code,{children:"PublicKeyCredentialCreationOptions"})," for ",(0,s.jsx)(t.code,{children:"create()"})," calls, and ",(0,s.jsx)(t.code,{children:"PublicKeyCredentialRequestOptions"})," for ",(0,s.jsx)(t.code,{children:"get()"})," calls.An example of both can be found below."]}),"\n",(0,s.jsx)(t.p,{children:"Attestation options for passkey creation:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'"publicKey": {\n  "rp": ...,\n  "user": ...,\n  "challenge": "uhUjPNlZfvn7onwuhNdsLPkkE5Fv-lUN",\n  "pubKeyCredParams": ...,\n  "authenticatorSelection": ...,\n  "attestation": "direct",\n  // highlight-start\n  "hints": ["security-key", "client-device", "hybrid"]\n  // highlight-end\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Assertion options for passkey authentication:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'"publicKey": {\n  "challenge": "NGc3jpB4Q-VnOmbhFBnDAczlYPT4soKA7xviGeJmDhc",\n  "timeout": 180000,\n  "rpId": "localhost",\n  "userVerification": "preferred",\n  // highlight-start\n  "hints": ["security-key", "client-device", "hybrid"]\n  // highlight-end\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["In-depth implementation guidance can be found on the Relying Party pages for both ",(0,s.jsx)(t.a,{href:"/docs/relying-party/reg-flow",children:"registration"})," and ",(0,s.jsx)(t.a,{href:"/docs/relying-party/auth-flow",children:"authentication"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"clients",children:"Clients"}),"\n",(0,s.jsx)(t.p,{children:"There's no additional code that's needed to leverage hints from a client application, assuming that the client has support for hints (as outlined in the previous section on platform support)."})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(6540);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);