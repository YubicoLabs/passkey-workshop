"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7572],{888:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/associated-domains-devmode-1f02a71180a6f2e04f4a2f43d44c2a0b.png"},1926:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/associated-domain-b470a830413204b473a25a3cee925b31.png"},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(6540);const o={},s=i.createContext(o);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:n},e.children)}},9410:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"mobile-client/getting-started","title":"Getting Started","description":"Instructions for making the local environment available for testing from your mobile client","source":"@site/docs/mobile-client/getting-started.md","sourceDirName":"mobile-client","slug":"/mobile-client/getting-started","permalink":"/passkey-workshop/docs/mobile-client/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/mobile-client/getting-started.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Mobile client","permalink":"/passkey-workshop/docs/category/mobile-client"},"next":{"title":"Advanced concepts","permalink":"/passkey-workshop/docs/category/advanced-concepts"}}');var o=t(2467),s=t(8453);const a={sidebar_position:1},r="Getting Started",l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"PawsKey iOS app",id:"pawskey-ios-app",level:2},{value:"Associated Domains",id:"associated-domains",level:2},{value:"Backend Tunneling (Optional - During Development)",id:"backend-tunneling-optional---during-development",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,o.jsx)(n.p,{children:"Instructions for making the local environment available for testing from your mobile client"}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Ensure you have completed the ",(0,o.jsx)(n.a,{href:"../deploy",children:"deploy project"})," section in the passkey workshop by navigating to the relying party API documentation running locally in your environment: ",(0,o.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,o.jsx)(n.li,{children:"An Apple Developer account with permission to create Associated Domains Entitlements"}),"\n",(0,o.jsx)(n.li,{children:"Install Xcode 14.3 or newer"}),"\n",(0,o.jsx)(n.li,{children:"Have a physical iPhone running iOS 16.4 or newer"}),"\n",(0,o.jsx)(n.li,{children:"YubiKey Security Key"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"pawskey-ios-app",children:"PawsKey iOS app"}),"\n",(0,o.jsxs)(n.p,{children:["Once you have ",(0,o.jsx)(n.a,{href:"../deploy#clone-the-repository",children:"cloned"})," the passkey workshop, navigate into the Pawskey iOS project folder"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"cd passkey-workshop/clients/mobile/iOS/Pawskey\n"})}),"\n",(0,o.jsx)(n.p,{children:"Launch the project into Xcode:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"xed .\n"})}),"\n",(0,o.jsx)(n.h2,{id:"associated-domains",children:"Associated Domains"}),"\n",(0,o.jsx)(n.p,{children:"Associated domains establish a secure association between domains (secure origin-based backend endpoints like the relying party server) and your mobile app. The association between the app and your backend satisfies origin-based requirements of the WebAuthn spec that is implied when using passkeys."}),"\n",(0,o.jsxs)(n.p,{children:["Supporting Associated Domains (",(0,o.jsx)(n.a,{href:"https://developer.apple.com/documentation/xcode/supporting-associated-domains",children:"docs"}),")\nAssociated Domains are added through app Entitlements in your Xcode project."]}),"\n",(0,o.jsx)(n.p,{children:"To set up the entitlement in your app, open the target\u2019s Signing & Capabilities tab in Xcode and add the Associated Domains capability. If they\u2019re not already present, this step adds the Associated Domains Entitlement to your app and the associated domains feature to your app ID."}),"\n",(0,o.jsx)(n.p,{children:"During Development:"}),"\n",(0,o.jsxs)(n.p,{children:["a. Enable associated domain alternate mode: If your web server is unreachable from the public internet (running locally), you can use the ",(0,o.jsx)(n.em,{children:"alternate mode"})," feature to bypass the Apple CDN and connect directly to your private domain.\nYou enable an alternate mode by adding a query string to your associated domain\u2019s entitlement as follows:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"webcredentials:<fully qualified domain>?mode=<alternate mode>\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Associated Domain - Developer Mode",src:t(1926).A+"",width:"881",height:"236"})}),"\n",(0,o.jsx)(n.p,{children:"Tip: Create two ENTITLEMENTS for your app. One DEBUG and one RELEASE. Add the alternate mode only to the DEBUG entitlement and leave the release entitlement without any mode appended."}),"\n",(0,o.jsx)(n.p,{children:"On your development iPhone:"}),"\n",(0,o.jsxs)(n.p,{children:["b. Enable Associated Domains Development under the UNIVERSAL LINKS in the Developer settings of your iPhone/iPad. ",(0,o.jsx)(n.code,{children:"Settings > Developer > Associated Domains Development"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Associated Domains - Developer Mode iPhone",src:t(888).A+"",width:"1290",height:"843"})}),"\n",(0,o.jsx)(n.p,{children:"That\u2019s it for setting up Associated Domains for your app."}),"\n",(0,o.jsx)(n.h2,{id:"backend-tunneling-optional---during-development",children:"Backend Tunneling (Optional - During Development)"}),"\n",(0,o.jsxs)(n.p,{children:["Following the getting started guide above, you should have a local deployment of the passkey workshop relying party server running on your machine and accessible through ",(0,o.jsx)(n.code,{children:"http://localhost:3000"}),". To make this backend endpoint reachable from the Pawskey iOS app running on an iPhone, you can either set the local IP address of your Mac workstation in the app OR you can install and deploy a tunnel service like Ngrok, devtunnel, or Cloudflared to expose your local environment to a reachable dynamic DNS endpoint. You would then put that endpoint URL into the Pawskey app."]}),"\n",(0,o.jsxs)(n.p,{children:["Here's an example for setting up ",(0,o.jsx)(n.code,{children:"devtunnel"})," service to expose your relying party localhost environment:"]}),"\n",(0,o.jsx)(n.p,{children:"MacOS: Download and install devtunnel via Homebrew"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ brew install devtunnel\n"})}),"\n",(0,o.jsx)(n.p,{children:"Start a tunnel using the following command"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ devtunnel host --port-numbers 3000\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Result: You should get a reachable DNS endpoint that looks something like: ",(0,o.jsx)(n.code,{children:"https://<some-text-here>-3000.<region>.devtunnels.ms"})," that redirects to the relying party running in your localhost environment. Take note of that endpoint as we\u2019ll be using it in our Pawskey iOS app."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);