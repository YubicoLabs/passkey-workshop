"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8528],{1518:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"relying-party/api-def","title":"API definition","description":"This section will discuss the API that defines a client\'s ability to interact with the relying party (RP) application. By the end of this section you should understand best practices for the API that should translate to better comprehension on how the application should behave.","source":"@site/docs/relying-party/api-def.md","sourceDirName":"relying-party","slug":"/relying-party/api-def","permalink":"/passkey-workshop/docs/relying-party/api-def","draft":false,"unlisted":false,"editUrl":"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/relying-party/api-def.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Relying Party","permalink":"/passkey-workshop/docs/category/relying-party"},"next":{"title":"Data sources and RP configurations","permalink":"/passkey-workshop/docs/relying-party/config-and-data"}}');var s=i(2467),o=i(8453);const a={sidebar_position:1},r="API definition",l={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Accessing the API documentation",id:"accessing-the-api-documentation",level:2},{value:"Overview of API methods",id:"overview-of-api-methods",level:2},{value:"API status",id:"api-status",level:3},{value:"Registration",id:"registration",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Credential management",id:"credential-management",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"api-definition",children:"API definition"})}),"\n",(0,s.jsxs)(t.p,{children:["This section will discuss the API that defines a client's ability to interact with the relying party (",(0,s.jsx)(t.strong,{children:"RP"}),") application. By the end of this section you should understand best practices for the API that should translate to better comprehension on how the application should behave."]}),"\n",(0,s.jsx)(t.p,{children:"Note that these best practices are for general passkey applications. The API defined in this section will evolve in later sections to accommodate different use cases."}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.p,{children:"Ensure that you have deployed the RP sample found in this project."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"/docs/deploy",children:"Follow the instructions on this page to deploy the application."})}),"\n",(0,s.jsx)(t.h2,{id:"accessing-the-api-documentation",children:"Accessing the API documentation"}),"\n",(0,s.jsxs)(t.p,{children:["Once your project is deployed, the API documentation can be found at: ",(0,s.jsx)(t.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,s.jsx)(t.h2,{id:"overview-of-api-methods",children:"Overview of API methods"}),"\n",(0,s.jsx)(t.p,{children:"The section below will outline the responsibilities of the different API methods."}),"\n",(0,s.jsx)(t.h3,{id:"api-status",children:"API status"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"/status"})," method can be used to check the availability of your application (if the service is running). This is not essential to passkey applications, but overall a best practice."]}),"\n",(0,s.jsx)(t.h3,{id:"registration",children:"Registration"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"/attestation"})," methods will be used to register a new passkey. Methods for the WebAuthn registration flow requires two calls."]}),"\n",(0,s.jsxs)(t.p,{children:["The first call (",(0,s.jsx)(t.a,{href:"http://localhost:8080/swagger-ui/index.html#/v1/serverPublicKeyCredentialCreationOptionsRequest",children:(0,s.jsx)(t.code,{children:"/attestation/options"})}),") is used to receive an object that includes the options/configurations that should be used when creating a new credential."]}),"\n",(0,s.jsxs)(t.p,{children:["The second call (",(0,s.jsx)(t.a,{href:"http://localhost:8080/swagger-ui/index.html#/v1/serverAuthenticatorAttestationResponse",children:(0,s.jsx)(t.code,{children:"/attestation/result"})}),") is used to send the newly created passkey to be stored in the RP."]}),"\n",(0,s.jsxs)(t.p,{children:["This topic will be covered in more detail in the following section on ",(0,s.jsx)(t.a,{href:"/docs/relying-party/reg-flow",children:"Registration Flows"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"/assertion"})," methods will be used to authenticate using the authenticator that generated your passkey. Methods for the WebAuthn authentication flow requires two calls."]}),"\n",(0,s.jsxs)(t.p,{children:["The first call (",(0,s.jsx)(t.a,{href:"http://localhost:8080/swagger-ui/index.html#/v1/serverPublicKeyCredentialGetOptionsRequest",children:(0,s.jsx)(t.code,{children:"/assertion/options"})}),") is used to receive an object that includes the options/configurations that should be used when trying to validate a challenge for authentication."]}),"\n",(0,s.jsxs)(t.p,{children:["The second call (",(0,s.jsxs)(t.a,{href:"http://localhost:8080/swagger-ui/index.html#/v1/serverAuthenticatorAssertionResponse",children:[" ",(0,s.jsx)(t.code,{children:"/assertion/result"})]}),") is used to send the signed challenge to verify if a valid credential was used."]}),"\n",(0,s.jsxs)(t.p,{children:["This topic will be covered in more detail in the following section on ",(0,s.jsx)(t.a,{href:"/docs/relying-party/auth-flow",children:"Authentication Flows"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"credential-management",children:"Credential management"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"/user/credentials"})," methods will provide credential management. In passkey applications, credential management refers to the process of managing a user's credential by allowing them to delete or rename a credential."]}),"\n",(0,s.jsxs)(t.p,{children:["In the current paradigm, ",(0,s.jsx)(t.strong,{children:"password"})," management best practices dictate that a user should rotate, or change their password frequently. This rotation is not needed for passkeys - in fact, the user should never be allowed to change the credential that was passed to the relying party."]}),"\n",(0,s.jsx)(t.p,{children:"The user should only have two options:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Update attributes that are used to help them identify a passkey (like a nickname)"}),"\n",(0,s.jsx)(t.li,{children:"Delete the passkey from the RP (good in the case of a lost or stolen authenticator)"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Both of these options are provided in our example. They can be tested once a credential has been registered to the RP."})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>r});var n=i(6540);const s={},o=n.createContext(s);function a(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);