"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[207],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>y});var i=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=i.createContext({}),l=function(e){var t=i.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(a),h=n,y=u["".concat(c,".").concat(h)]||u[h]||p[h]||o;return a?i.createElement(y,r(r({ref:t},d),{},{components:a})):i.createElement(y,r({ref:t},d))}));function y(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,r=new Array(o);r[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:n,r[1]=s;for(var l=2;l<o;l++)r[l]=a[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3806:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var i=a(7462),n=(a(7294),a(3905)),o=a(2004);const r={sidebar_position:1},s="Overview",c={unversionedId:"advanced_use_cases/attestation/overview",id:"advanced_use_cases/attestation/overview",title:"Overview",description:"Attestation refers to the ability of a security device to prove its own identity and for a relying party to attain details about the security device it was created on, and which manufacturer actually created said device.",source:"@site/docs/advanced_use_cases/attestation/overview.mdx",sourceDirName:"advanced_use_cases/attestation",slug:"/advanced_use_cases/attestation/overview",permalink:"/passkey-workshop/docs/advanced_use_cases/attestation/overview",draft:!1,editUrl:"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/advanced_use_cases/attestation/overview.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Attestation",permalink:"/passkey-workshop/docs/category/attestation"},next:{title:"Relying party implementation",permalink:"/passkey-workshop/docs/advanced_use_cases/attestation/relying-party-implementation"}},l={},d=[{value:"How attestation works",id:"how-attestation-works",level:2},{value:"Before you start",id:"before-you-start",level:2},{value:"Example",id:"example",level:2},{value:"Types of attestation",id:"types-of-attestation",level:2},{value:"None",id:"none",level:3},{value:"Direct",id:"direct",level:3},{value:"Indirect",id:"indirect",level:3},{value:"Enterprise",id:"enterprise",level:3},{value:"Attestation metadata",id:"attestation-metadata",level:2}],u={toc:d},p="wrapper";function h(e){let{components:t,...a}=e;return(0,n.kt)(p,(0,i.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"overview"},"Overview"),(0,n.kt)("p",null,"Attestation refers to the ability of a security device to prove its own identity and for a relying party to attain details about the security device it was created on, and which manufacturer actually created said device."),(0,n.kt)("h2",{id:"how-attestation-works"},"How attestation works"),(0,n.kt)("p",null,"The attestation of a security device is facilitated by its digital attestation certificate, which exposes details such as its make and model; but more importantly the public key component of a key pair imported by the manufacturer during production. An attestation certificate is always specific to a company or model, for example, all YubiKey 5 series devices created within the same production batch possess the same attestation certificate, and similarly, an attestation certificate is shared amongst all iPhone 12 Pro devices produced in a batch. Ultimately, an attestation can always be used to cryptographically assert that a specific security device is being used when it is registered."),(0,n.kt)("p",null,"It is important to note that WebAuthn strives for an equal balance of security and privacy, and disincentivizes any mechanism that makes security keys uniquely identifiable. As such, in order to preserve user privacy and limit the ability of an RP to identify a user based solely on the attestation certificate presented during registration, FIDO guidance recommends to all manufacturers that each attestation certificate span at least 100,000 distributed devices within any given batch."),(0,n.kt)("h2",{id:"before-you-start"},"Before you start"),(0,n.kt)("p",null,"It is important to be aware that requiring attestation is an invasive policy, especially when used to restrict users' choice of authenticator. For some applications this is necessary; for most it is not. Similarly, attestation does not automatically make your users more secure. Attestation gives you information, but you have to know what to do with that information in order to get a security benefit from it; it is a powerful tool but does very little on its own. Attestation can help retrieve and verify additional information about an authenticator, and enforce some very basic policy based on it, but it is your responsibility to further leverage that information into improved security."),(0,n.kt)("p",null,"When in doubt, err towards being more permissive, because using a passkey is more secure than not using a passkey. It may still be useful to request and store attestation information for future reference - for example, to warn users if security issues are discovered in their authenticators - but we recommend that you do not require a trusted attestation unless you have specific reason to do so."),(0,n.kt)("h2",{id:"example"},"Example"),(0,n.kt)("p",null,"Below is a demonstration of how attestation can be used to enhance the user experience. Notice how without any additional input, the application is able to populate the credential list with information about the credential that the user used to register their initial passkey."),(0,n.kt)("p",null,"Also note the second passkey added to the user's account; some authenticators, especially copyable passkeys, are unable to send attestation. Because of this, there is no attestation to evaluate, so no information can be inferred about the make/model of the key. In this instance we are using TouchID on a Mac, that is leveraging a copyable passkey that can be synched to an iCloud Keychain."),(0,n.kt)(o.Z,{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/attestation_1.mp4",style:{marginBottom:"2em"},mdxType:"ReactPlayer"}),(0,n.kt)("h2",{id:"types-of-attestation"},"Types of attestation"),(0,n.kt)("p",null,"The WebAuthn specification notes a few different options that a relying party can use to convey the type of attestation it wishes to receive, if allowed. This option is set by the ",(0,n.kt)("inlineCode",{parentName:"p"},"attestation")," property in the ",(0,n.kt)("inlineCode",{parentName:"p"},"PublicKeyCredentialCreationOptions")," that is sent during registration."),(0,n.kt)("h3",{id:"none"},"None"),(0,n.kt)("p",null,"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"none")," indicates to the client that the relying party has no interest in receiving an attestation statement. The client will still generate and send a passkey, but it will not include any of the information that will indicate the make/model."),(0,n.kt)("h3",{id:"direct"},"Direct"),(0,n.kt)("p",null,"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," indicates to the client that the relying party will accept an attestation statement directly from the authenticator. The client should make no attempt to alter this data, and should directly pass whatever was generated by the authenticator."),(0,n.kt)("p",null,"This is the default option used in our project."),(0,n.kt)("h3",{id:"indirect"},"Indirect"),(0,n.kt)("p",null,"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"indirect")," indicates to the client that the relying party will accept an attestation statement, but the client can make its own determination on how to obtain the attestation data. In other words, the client may replace the attestation statement provided by the authenticator with its preferred data."),(0,n.kt)("h3",{id:"enterprise"},"Enterprise"),(0,n.kt)("p",null,"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"enterprise")," indicates to the client that the relying party needs an attestation statement from the authenticator that may include authenticator specific information, such as serial number. The previous examples attempt to leverage privacy preserving principles that prevent a relying party from tracking specific authenticators across different service. While attestation should be privacy preserving, there are enterprise use cases where an authenticator needs to present specific information about itself. Note that enterprise attestation can only be used if the authenticator itself has the feature enabled, and the user has consented to allowing the origin to request the information. ",(0,n.kt)("a",{parentName:"p",href:"https://developers.yubico.com/WebAuthn/Concepts/Enterprise_Attestation/"},"More information on enterprise attestation can be found here"),"."),(0,n.kt)("h2",{id:"attestation-metadata"},"Attestation metadata"),(0,n.kt)("p",null,"Developers should be aware that the attestation statement included with a passkey only sends the minimum amount of information needed to validate the root of trust present on the authenticator. This data includes:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The AAGUID, which is the unique identifier given to every FIDO2 authenticator"),(0,n.kt)("li",{parentName:"ul"},"Attestation signature, which can be verified using a manufacturer\u2019s public key.")),(0,n.kt)("p",null,"If this is the only data that is provided, then how does the relying party identify other device characteristics like model name, interfaces, manufacturer name, and other signals? Also, how is a developer supposed to manage all of this information, are they meant to maintain their own repository of device metadata?"),(0,n.kt)("p",null,"The FIDO Alliance provides, and stewards the ",(0,n.kt)("a",{parentName:"p",href:"https://fidoalliance.org/metadata/"},"FIDO Metadata Service (MDS)"),", which is a collection of metadata for authenticators. The MDS can be used to evaluate the root of trust sent with a credential during registration in order to identify the device, and correlate it to a metadata entry containing a variety of different data on the authenticator."),(0,n.kt)("p",null,"The repository is offered in the form of a BLOB hosted on a FIDO Alliance resource. If your application is connected to an external network, then you can download the BLOB using a cURL request, or you can download and self-host it for non-public facing resources hosted in your environment."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/Yubico/java-webauthn-server"},"Yubico's java-webauthn-server library")," includes support for the MDS, where you are able to download the BLOB, and validate attestation statements."))}h.isMDXComponent=!0}}]);