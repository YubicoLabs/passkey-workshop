"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2737],{337:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/what_is_a_passkey-f9958fabf49e33693ff96d71e42eaba1.png"},2332:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"high_assurance/client_application/user_registration","title":"User registration","description":"This section will cover the self-registration of a new user account. The user will create a new account by entering their username, and registering their first passkey.","source":"@site/docs/high_assurance/client_application/user_registration.mdx","sourceDirName":"high_assurance/client_application","slug":"/high_assurance/client_application/user_registration","permalink":"/passkey-workshop/docs/high_assurance/client_application/user_registration","draft":false,"unlisted":false,"editUrl":"https://github.com/YubicoLabs/passkey-workshop/tree/main/docs/docs/high_assurance/client_application/user_registration.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Client application","permalink":"/passkey-workshop/docs/high_assurance/client_application"},"next":{"title":"User authentication","permalink":"/passkey-workshop/docs/high_assurance/client_application/user_authentication"}}');var s=n(2467),a=n(8453),o=n(3554),r=n.n(o);const c={sidebar_position:1},l="User registration",h={},d=[{value:"Demonstration",id:"demonstration",level:2},{value:"UX Considerations",id:"ux-considerations",level:2},{value:"Implementation guidance",id:"implementation-guidance",level:2},{value:"Username selection",id:"username-selection",level:3},{value:"Passkey options",id:"passkey-options",level:3}];function p(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"user-registration",children:"User registration"})}),"\n",(0,s.jsx)(t.p,{children:"This section will cover the self-registration of a new user account. The user will create a new account by entering their username, and registering their first passkey."}),"\n",(0,s.jsx)(t.h2,{id:"demonstration",children:"Demonstration"}),"\n",(0,s.jsx)(t.p,{children:"The videos below will demonstrate how a user self registers in the application."}),"\n",(0,s.jsx)(t.p,{children:"This first video will demonstrates a user creating an account using a passkey that was registered on a security key."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_user_reg_sk.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.p,{children:"This second video will demonstrate a user creating a passkey using their on-device authenticator. In our example we will be leveraging Touch ID on a MacOS device."}),"\n",(0,s.jsx)(r(),{controls:!0,width:"100%",height:"100%",url:"/passkey-workshop/videos/ha_user_reg_plat.mp4",style:{marginBottom:"2em"}}),"\n",(0,s.jsx)(t.h2,{id:"ux-considerations",children:"UX Considerations"}),"\n",(0,s.jsx)(t.p,{children:"Below is a list of different user experience notes based on the demonstrations above"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["For simplicity, our demonstration only allows a user to create an account by registering a passkey. The ",(0,s.jsx)(t.a,{href:"https://fidoalliance.org/ux-guidelines-for-passkey-creation-and-sign-ins/#helpful-tools:~:text=UX%20Goals%3A%20Allow%20people%20to%20create%20new%20accounts%20with%20a%20passkey%20(no%20password).",children:"FIDO UX guidelines"})," note that you should continue to allow people to create accounts with passwords."]}),"\n",(0,s.jsxs)(t.li,{children:["Presenting users with different options for creating a passkey specifically using security keys (cross-platform) or biometrics (platform) can help to simplify the user experience, and allows users to more explicitly understand where and how their passkeys are being generated.","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The security key option will always prompt the user to create a passkey with a cross device authenticator (security key or through a QR code)"}),"\n",(0,s.jsx)(t.li,{children:"The biometric option will always prompt the user to create a passkey with their on-device authenticator (e.g. Windows Hello, Face ID, Android Biometrics)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["During these early phases of passkey adoption, you may want to include a blurb that provides a simple explanation on passkeys. Below is the wording used in our example application seen in the demonstration above","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.img,{alt:"Wording for what is a passkey",src:n(337).A+"",width:"2102",height:"710"})}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.a,{href:"https://fidoalliance.org/ux-guidelines-for-passkey-creation-and-sign-ins/#content-principles",children:"FIDO UX guidelines"})," also includes guidance on how to provide context to your users"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"implementation-guidance",children:"Implementation guidance"}),"\n",(0,s.jsx)(t.h3,{id:"username-selection",children:"Username selection"}),"\n",(0,s.jsxs)(t.p,{children:["The user registration flow closely reflects the sample shown in the previous section ",(0,s.jsx)(t.a,{href:"/docs/web-client/reg-flow",children:"implementation guidance for registering a passkey on a web client"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The example in the link above infers the username being sent to the relying party for the attestation options from the current user session. Because the user has not been authenticated, or created, the webpage will need a text input to allow for a username to be provided."}),"\n",(0,s.jsx)(t.p,{children:"The relying party will note that there are no credentials associated to the username, and will generate a new user handle that will be provided to the identity provider to create a new user."}),"\n",(0,s.jsx)(t.h3,{id:"passkey-options",children:"Passkey options"}),"\n",(0,s.jsx)(t.p,{children:"Our page provides two different choices to help guide a user in generating a new passkey: biometrics and security keys. As mentioned in the UX section, this is done to provide targeted guidance to help users select the option that is most appropriate for them."}),"\n",(0,s.jsxs)(t.p,{children:["This is done by providing different parameters to the method used to generate the ",(0,s.jsx)(t.code,{children:"PublicKeyCredentialCreationOptions"})," from the ",(0,s.jsx)(t.code,{children:"/attestation/options"})," API call."]}),"\n",(0,s.jsxs)(t.p,{children:["In this case, we will provide a button for security keys, and another for biometrics. They will both utilize the ",(0,s.jsx)(t.code,{children:"registerPasskey()"})," method, but pass different values to indicate their authenticator preference. The highlighted line below indicates the ",(0,s.jsx)(t.code,{children:"authenticatorAttachment"})," property, which allows your client to set its authenticator preference. An explanation on these values can be found ",(0,s.jsx)(t.a,{href:"/docs/relying-party/reg-flow#:~:text=authenticatorAttachment%20defines%20the,use%20ANY%20modality.",children:"here"}),"."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["Note that the concept of ",(0,s.jsx)(t.code,{children:"PasskeyServices"})," was covered in a ",(0,s.jsx)(t.a,{href:"/docs/web-client/api-client#registration-methods",children:"previous section"}),". The ",(0,s.jsx)(t.code,{children:"getAttestationOptions"})," method has been expanded in the code sample below to demonstrate that we are attempting to invoke different options for the ",(0,s.jsx)(t.code,{children:"authenticatorAttachment"})," property."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'async function registerPasskey(authenticatorAttachment) {\n  const request = {\n    method: "POST",\n    headers: {\n      /* */\n    },\n    body: {\n      userName: "${username}",\n      displayName: "${username}",\n      authenticatorSelection: {\n        residentKey: "preferred",\n        // highlight-next-line\n        authenticatorAttachment: authenticatorAttachment,\n        userVerification: "required",\n      },\n      attestation: "direct",\n    },\n  };\n\n  const attestationOptions = await fetch(base_url, request);\n\n  const makeCredential = await navigator.credentials.create(attestationOptions);\n\n  const attestationResult = sendAttestationResult(makeCredential);\n}\n\n<button onclick="registerPasskey(\'cross-platform\')">Click me for a security key passkey<button/>\n<button onclick="registerPasskey(\'platform\')">Click me for a biometric passkey<button/>\n'})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(6540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);